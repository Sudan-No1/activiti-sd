<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/Normalize.css"/>
    <link rel="stylesheet" href="/css/bootstrap.css"/>
    <link rel="stylesheet" href="/css/common.css"/>
    <style>
        .emMark{
            display: inline-block;
            height: 18px;
            margin: 8px 0;
            font-size: 18px;
            color: red;
        }
        .form-inp-static{
		    border: 0;
		    min-height: 34px;
		    padding-top: 7px;
		    padding-bottom: 7px;
		    margin-bottom: 0;
		    width: 100%;
		}
    </style>
    <title>add</title>
</head>
<body>
    <div class="container">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">房屋调配申请</h3>
            </div>
            <div class="panel-body">
                <!--提示信息-->
                <div class="alert alert-info alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <strong>提示：</strong> 标*为必填项，请认真填写
                </div>

                <!--表单-->

                <form class="form-horizontal" action="/billController/addBill" method="post" enctype="multipart/form-data" id="applicationForm1">

                    <div class="form-group">
                        <label class="col-sm-2 control-label">发起人</label>
                    	
                        <div class="col-sm-4">
                        	 <input type="text"
                                   class="form-inp-static"
                                   name="Applicant"
                                   value = "" 
                                   th:value="${username}"
                                   readonly/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">发起单位</label>
                        <div class="col-sm-4">
                        	<input type="text"
                                   class="form-inp-static"
                                   name="Unit"
                                   th:value="${unit}"
                                   readonly/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">发起部门</label>
                        <div class="col-sm-4">
                       		<input type="text"
                                   class="form-inp-static"
                                   name="Department"
                                   th:value="${department}"
                                   readonly/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">发起日期</label>
                        <div class="col-sm-4">
                        	<input type="text"
                                   class="form-inp-static"
                                   name="LaunchDate"
                                   th:value="${launchDate}"
                                   readonly/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">编号</label>
                        <div class="col-sm-4">
                        	<input type="text"
                                   class="form-inp-static"
                                   name="Description"
                                   value = "" 
                                   th:value="${description}"
                                   readonly/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="inpLinkman" class="col-sm-2 control-label">联系人</label>
                        <div class="col-sm-4">
                            <input type="text"
                                   class="form-control"
                                   id="inpLinkman"
                                   name="Contact"
                                   placeholder="联系人姓名" />
                        </div>
                        <span class="emMark">*</span>
                    </div>

                    <div class="form-group">
                        <label for="inpContactWay" class="col-sm-2 control-label">联系方式</label>
                        <div class="col-sm-4">
                            <input type="tel"
                                   class="form-control"
                                   id="inpContactWay"
                                   name="ContactNo"
                                   placeholder="联系方式" />
                        </div>
                        <span class="emMark">*</span>
                    </div>

                    <div class="form-group">
                        <label for="radioPurpose1" class="col-sm-2 control-label">房屋用途</label>
                        <div class="col-sm-4">
                            <div class="radio" style="display: inline-block;margin-right: 20px;">
                                <label>
                                    <input type="radio" name="Purpose" id="radioPurpose1" value="production" />
                                    生产用房
                                </label>
                            </div>
                            <div class="radio" style="display: inline-block">
                                <label>
                                    <input type="radio" name="Purpose" id="radioPurpose2" value="office" />
                                    办公用房
                                </label>
                            </div>
                        </div>
                        <span class="emMark">*</span>
                    </div>

                     <div class="form-group">
                        <label for="houseName" class="col-sm-2 control-label">房屋名称</label>
                        <div class="col-sm-7">
                            <div class="input-group">
                                <input type="text"
                                       class="form-control"
                                       id="houseName"
                                       name="Name"
                                       value=""
                                       placeholder="房屋名称" />
                                <span class="input-group-btn">
                                    <a class="btn btn-default"
                                       data-toggle="modal"
                                       data-target="#roomNameList">
                                        <span class="glyphicon glyphicon-list"></span>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="houseAddress" class="col-sm-2 control-label">房屋地址</label>
                        <div class="col-sm-7">
                            <input type="text"
                                   class="form-control"
                                   id="houseAddress"
                                   name="Address"
                                   placeholder="房屋地址" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="remarks" class="col-sm-2 control-label">需求情况说明</label>
                        <div class="col-sm-7">
                            <textarea class="form-control"
                                      id="remarks"
                                      name="DemandRemark"
                                      rows="3"
                                      placeholder="需求情况说明"></textarea>
                        </div>
                    </div>
					
					<div class="form-group">
					    <label class="col-sm-2 control-label">附件</label>
					    <div class="col-sm-4">
					    <div class="attachText">
					    	<div class="input-group">
						        <div class="form-control"></div>
						        <div class="input-group-btn">
					            	<a class="btn btn-default">
						            	<span class="glyphicon glyphicon-folder-open"></span>
						                 	上传
					            	</a>
					            </div>
					        </div>
					        <input type="file" name="file" class="form-control" id="jobData" onchange="loadFile(this.files[0])" />
					    </div>
					    </div>
					</div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                        	<input type="submit" class="btn btn-default" onclick="checkout()" value="提交申请">
                        </div>
                    </div>
                    <input type="hidden" name="billName" value="AllocateBill"><br>
                    <input type="hidden" name="Area"><br>
                    <input type="hidden" name="RoomId"><br>
                    <input type="hidden" name="BillDescription" value="房屋调配流程"><br>
                    <input type="hidden" name="conditionName" value="Purpose,flag"><br>
                    <input id="flag" type="hidden" name="flag" value="" /><br>
                </form>
            	<input type="hidden" name="UseUint" />
            	<input type="hidden" name="OwnershipCompany" />
            	<input type="hidden" name="CurrentPurpose" />
            </div>
        </div>
    </div>
    
      <div class="modal fade" id="roomNameList" tabindex="-1" role="dialog" aria-labelledby="tasksLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="javaScript:;" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </a>
                    <h4 class="modal-title">请选择调配房间！</h4>
                </div>
                <div class="modal-body clearfix">
                    <div class="row">
                        <div class="col-sm-12">
                            <form class="input-group"
                                  id="searchRoomForm"
                                  method="post" >
                                <input type="text"
                                       class="form-control"
                                       id="roomNameSearch"
                                       placeholder="请输入搜索条件...">
                                <span class="input-group-btn">
                                    <a href="javaScript:;"
                                       class="btn btn-default"
                                       id="roomNameBtn">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </a>
                                </span>
                            </form><!-- /input-group -->
                        </div><!-- /.col-lg-12 -->
                    </div><!-- /.row-->

                    <div class="searchResultList">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th width="3%"></th>
                                <th width="25%">房间名称</th>
                                <th width="25%">房间编号</th>
                                <th width="25%">房间位置</th>
                                <th >所在楼层</th>
                            </tr>
                            </thead>
                            <tbody></tbody>
                        </table>

                    </div><!-- /.searchResultList-->

                    <!--/page 分页-->
                    <div aria-label="Page navigation" class="pull-right pages-box">
                        <ul class="pagination" id="modalListPages"></ul>
                    </div><!--/Page-->


                </div><!-- /.modal-body-->

                <div class="modal-footer">
                    <a href="javaScript:;" class="btn btn-default" data-dismiss="modal">取消</a>
                    <a href="javaScript:;" class="btn btn-primary" id="getDataBtn"  data-dismiss="modal">确定</a>
                </div><!-- /.modal-footer-->
            </div><!-- /."modal-content-->
        </div><!-- /.modal-dialog-->
    </div><!-- /.modal-->
    <script src="/js/jquery-3.2.1.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script src="/js/jqPaginator.js"></script>
    <script src="/js/form/allocateBill.js"></script>
    <script th:inline="javascript">
    function checkout(){
    	var changeUser = ($("input[name='UseUint']").val()==[[${unit}]]);
    	var changeType =  ($("input[name='OwnershipCompany']").val()==[[${unit}]]);
    	var externaUnit = ($("input[name='Purpose']:checked").val()== $("input[name='CurrentPurpose']").val());
    	if(changeUser&&changeType&&externaUnit){
    		$("input[name='flag']").val("false")
    	}else{
    		$("input[name='flag']").val("true");
    	}
    }
    
    function loadFile(file){
        $(".attachText div.form-control").text(file.name);
    }
    </script>

</body>
</html>